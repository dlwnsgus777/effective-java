## 아이템 17 - 변경 가능성을 최소화 하라 - 핵심 정리
---
### 불변 클래스

불변 클래스란 __한번 만들어지면 그 인스턴스의 상태가 바뀌지 않는 것__ 을 말한다.

그 인스턴스가 소멸될 때까지 인스턴스의 내부의 값들이 변경되지 않는 것이다.

이렇게 설계된 클래스를 __불변 클래스__ 라고 하고 불변 클래스의 인스턴스를 __불변 인스턴스__ 라고 한다.

불변 클래스를 만들기위한 다섯가지 규칙이 있다.

- 객체의 상태를 변경하는 메서드를 제공하지 않는다.

```java
public class PhoneNumber {

    private short areaCode, prefix, lineNum;

    public void setAreaCode(short areaCode) {
        this.areaCode = areaCode;
    }

    public void setPrefix(short prefix) {
        this.prefix = prefix;
    }

    public void setLineNum(short lineNum) {
        this.lineNum = lineNum;
    }

    public short getAreaCode() {
        return areaCode;
    }  

    public short getPrefix() {
        return prefix;
    }

    public short getLineNum() {
        return lineNum;
    }
}
```
위의 클래스처럼 상태를 변경할 수 있는 ``setter`` 를 제공하면 안된다.

```java
public class PhoneNumber {

   private short areaCode, prefix, lineNum;

   public PhoneNumber(short areaCode, short prefix, short lineNum) {
      this.areaCode = areaCode;
      this.prefix = prefix;
      this.lineNum = lineNum;
   }

   public short getAreaCode() {
      return areaCode;
   }

   public short getPrefix() {
      return prefix;
   }

   public short getLineNum() {
      return lineNum;
   }
}
```
위처럼 생성자를 통해 객체를 처음 만들 때 값을 받은 뒤 객체의 값을 변경하는 메서드를 제공하지 않는다.

- 상속을 할 수 없도록 막는다.

```java
public class PhoneNumber {

   private short areaCode, prefix, lineNum;

   public PhoneNumber(short areaCode, short prefix, short lineNum) {
      this.areaCode = areaCode;
      this.prefix = prefix;
      this.lineNum = lineNum;
   }

   public short getAreaCode() {
      return areaCode;
   }

   public short getPrefix() {
      return prefix;
   }

   public short getLineNum() {
      return lineNum;
   }
}
```
위의 클래스는 상속을 허용한 상태이다.

class 에 ``final`` 키워드가 없기 때문이고, ``public`` 생성자를 가지고 있기 때문이기도 하다.

```java
public final class PhoneNumber {

   private short areaCode, prefix, lineNum;

   public PhoneNumber(short areaCode, short prefix, short lineNum) {
      this.areaCode = areaCode;
      this.prefix = prefix;
      this.lineNum = lineNum;
   }

   public short getAreaCode() {
      return areaCode;
   }

   public short getPrefix() {
      return prefix;
   }

   public short getLineNum() {
      return lineNum;
   }
}
```

상속을 막는 방법은 final 클래스를 만들거나 ``private`` 생성자만 가지고 있게 만들면 된다.




