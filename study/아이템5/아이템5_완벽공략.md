## 아이템 5 - 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라 - 완벽 공략
---
```java
public class SpellChecker {

   private final Dictionary dictionary;

   public SpellChecker(Dictionary dictionary) {
      this.dictionary = dictionary;
   }

   public boolean isValid(String word) {
      // TODO 여기 SpellChecker 코드
      return dictionary.contains(word);
   }

   public List<String> suggestions(String typo) {
      // TODO 여기 SpellChecker 코드
      return dictionary.closeWordsTo(typo);
   }
}
```

__SpellChecker__ 가 사용하는 의존성 대신에 팩토리를 넘겨주는 방법이 있다.

```java
public class DictionaryFactory {
   public Dictionary get() {
      return new DefaultDictionary();
   }
}
```
__DictionaryFactory__ 클래스를 생성한 뒤

```java
public class SpellChecker {

   private final Dictionary dictionary;

//   public SpellChecker(Dictionary dictionary) {
//      
//      this.dictionary = dictionary;
//   }

   public SpellChecker(DictionaryFactory dictionaryFactory) {

      this.dictionary = dictionaryFactory.get();
   }

   public boolean isValid(String word) {
      // TODO 여기 SpellChecker 코드
      return dictionary.contains(word);
   }

   public List<String> suggestions(String typo) {
      // TODO 여기 SpellChecker 코드
      return dictionary.closeWordsTo(typo);
   }
}
```
이러한 예제를 발전시키면 팩터리 메서드 패턴이 된다.

자원을 바로 받는게 아니라 팩터리를 통해 자원을 가져오는 방식으로

중간 단계를 한번 더 추상화 시킨 것이다.

자원을 생성하는 과정이 복잡하다면 팩터리를 통해 자원을 받아울 수 있다.

__DictionaryFactory__ 는 어떠한 뭔가를 가져오는 역할을 한다.

마치 __Supplier<T> 인터페이스__ 처럼 매개변수 필요없이 뭔가를 가져오는 메서드이다.

```java
public class SpellChecker {

   private final Dictionary dictionary;
   

   public SpellChecker(Supplier<Dictionary> dictionarySupplier) {

      this.dictionary = dictionarySupplier.get();
   }


   public boolean isValid(String word) {
      // TODO 여기 SpellChecker 코드
      return dictionary.contains(word);
   }

   public List<String> suggestions(String typo) {
      // TODO 여기 SpellChecker 코드
      return dictionary.closeWordsTo(typo);
   }
}
```

위처럼 __Supplier<T> 인터페이스__ 를 통해 구현할 수 있다.

__Supplier<T> 인터페이스__ 는 팩터리를 표현한 완벽한 예가 될 수 있다.

```java
class SpellCheckerTest {

   @Test
   void isValid() {
      SpellChecker spellChecker = new SpellChecker(DefaultDictionary::new);

      assertTrue(spellChecker.isValid("test"));
   }
}
```
위처럼 __Supplier<T> 인터페이스__ 를 사용한 생성자를 사용할 수 있다.

```java
public class SpellChecker {

   private final Dictionary dictionary;
   

   public SpellChecker(Supplier<? extends Dictionary> dictionarySupplier) {

      this.dictionary = dictionarySupplier.get();
   }


   public boolean isValid(String word) {
      // TODO 여기 SpellChecker 코드
      return dictionary.contains(word);
   }

   public List<String> suggestions(String typo) {
      // TODO 여기 SpellChecker 코드
      return dictionary.closeWordsTo(typo);
   }
}
```

위처럼 __Dictionary__ 의 하위타입도 받을 수 있다.

```java
   public SpellChecker(Supplier<Dictionary> dictionarySupplier) {

      this.dictionary = dictionarySupplier.get();
   }

```
하지만 위처럼 작성해도 __Dictionary__ 에 관련된 타입을 받을 수 있다.

---

### 팩터리 메서드 패턴

